--- main.py	2025-12-17 10:00:00
+++ main.py	2025-12-17 10:00:00
@@ -3,7 +3,7 @@
 from typing import Any, Dict, List, Optional
 
 from dotenv import load_dotenv
-from fastapi import FastAPI, HTTPException
+from fastapi import FastAPI, HTTPException, APIRouter
 from fastapi.middleware.cors import CORSMiddleware
 from fastapi.responses import JSONResponse, RedirectResponse
 from pydantic import BaseModel, Field
@@ -52,8 +52,12 @@
     version="1.0.0",
 )
 
+# 创建 API 路由器，添加 /api/v1 前缀
+api_router = APIRouter(prefix="/api/v1")
 
 
+
+
 class Message(BaseModel):
     role: str = Field(..., description="Role of the message (user or assistant).")
     content: str = Field(..., description="Message content.")
@@ -75,7 +79,7 @@
     filters: Optional[Dict[str, Any]] = None
 
 
-@app.post("/configure", summary="Configure Mem0")
+@api_router.post("/configure", summary="Configure Mem0")
 def set_config(config: Dict[str, Any]):
     """Set memory configuration."""
     global MEMORY_INSTANCE
@@ -83,7 +87,7 @@
     return {"message": "Configuration set successfully"}
 
 
-@app.post("/memories", summary="Create memories")
+@api_router.post("/memories", summary="Create memories")
 def add_memory(memory_create: MemoryCreate):
     """Store new memories."""
     if not any([memory_create.user_id, memory_create.agent_id, memory_create.run_id]):
@@ -98,7 +102,7 @@
         raise HTTPException(status_code=500, detail=str(e))
 
 
-@app.get("/memories", summary="Get memories")
+@api_router.get("/memories", summary="Get memories")
 def get_all_memories(
     user_id: Optional[str] = None,
     run_id: Optional[str] = None,
@@ -117,7 +121,7 @@
         raise HTTPException(status_code=500, detail=str(e))
 
 
-@app.get("/memories/{memory_id}", summary="Get a memory")
+@api_router.get("/memories/{memory_id}", summary="Get a memory")
 def get_memory(memory_id: str):
     """Retrieve a specific memory by ID."""
     try:
@@ -127,7 +131,7 @@
         raise HTTPException(status_code=500, detail=str(e))
 
 
-@app.post("/search", summary="Search memories")
+@api_router.post("/search", summary="Search memories")
 def search_memories(search_req: SearchRequest):
     """Search for memories based on a query."""
     try:
@@ -138,7 +142,7 @@
         raise HTTPException(status_code=500, detail=str(e))
 
 
-@app.put("/memories/{memory_id}", summary="Update a memory")
+@api_router.put("/memories/{memory_id}", summary="Update a memory")
 def update_memory(memory_id: str, updated_memory: Dict[str, Any]):
     """Update an existing memory with new content.
     
@@ -156,7 +160,7 @@
         raise HTTPException(status_code=500, detail=str(e))
 
 
-@app.get("/memories/{memory_id}/history", summary="Get memory history")
+@api_router.get("/memories/{memory_id}/history", summary="Get memory history")
 def memory_history(memory_id: str):
     """Retrieve memory history."""
     try:
@@ -166,7 +170,7 @@
         raise HTTPException(status_code=500, detail=str(e))
 
 
-@app.delete("/memories/{memory_id}", summary="Delete a memory")
+@api_router.delete("/memories/{memory_id}", summary="Delete a memory")
 def delete_memory(memory_id: str):
     """Delete a specific memory by ID."""
     try:
@@ -177,7 +181,7 @@
         raise HTTPException(status_code=500, detail=str(e))
 
 
-@app.delete("/memories", summary="Delete all memories")
+@api_router.delete("/memories", summary="Delete all memories")
 def delete_all_memories(
     user_id: Optional[str] = None,
     run_id: Optional[str] = None,
@@ -197,7 +201,7 @@
         raise HTTPException(status_code=500, detail=str(e))
 
 
-@app.post("/reset", summary="Reset all memories")
+@api_router.post("/reset", summary="Reset all memories")
 def reset_memory():
     """Completely reset stored memories."""
     try:
@@ -208,6 +212,9 @@
        raise HTTPException(status_code=500, detail=str(e))
 
 
+# 将 API 路由器注册到应用
+app.include_router(api_router)
+
 # 保持根路径和文档路径不变（无前缀）
 @app.get("/", summary="Redirect to the OpenAPI documentation", include_in_schema=False)
 def home():
