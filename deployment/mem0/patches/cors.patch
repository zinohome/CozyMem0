--- main.py	2025-12-15 17:16:35
+++ main.py.patched	2025-12-15 17:46:57
@@ -4,6 +4,7 @@
 
 from dotenv import load_dotenv
 from fastapi import FastAPI, HTTPException
+from fastapi.middleware.cors import CORSMiddleware
 from fastapi.responses import JSONResponse, RedirectResponse
 from pydantic import BaseModel, Field
 
@@ -63,8 +64,23 @@
     description="A REST API for managing and searching memories for your AI Agents and Apps.",
     version="1.0.0",
 )
+# 配置 CORS
+# 允许的源（可以通过环境变量配置）
+ALLOWED_ORIGINS = os.environ.get(
+    "CORS_ORIGINS",
+    "http://localhost:3000,http://localhost:4000,http://192.168.66.11:3000,http://192.168.66.11:4000"
+).split(",")
 
+app.add_middleware(
+    CORSMiddleware,
+    allow_origins=ALLOWED_ORIGINS,
+    allow_credentials=True,
+    allow_methods=["*"],
+    allow_headers=["*"],
+)
 
+
+
 class Message(BaseModel):
     role: str = Field(..., description="Role of the message (user or assistant).")
     content: str = Field(..., description="Message content.")
